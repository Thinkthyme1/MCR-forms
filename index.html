<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="theme-color" content="#1f2937" />
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self'; style-src 'self'; img-src 'self' blob: data:; connect-src 'none'; font-src 'self'; object-src 'none'; base-uri 'self'; frame-ancestors 'none'; form-action 'self'" />
    <link rel="manifest" href="manifest.webmanifest" />
    <link rel="stylesheet" href="styles.css" />
    <title>MCR Forms Offline</title>
  </head>
  <body>
    <div id="app" class="app">
      <section id="startupScreen" class="modal-screen" aria-live="polite">
        <div class="card">
          <h1>MCR Forms</h1>
          <p id="startupMessage">Preparing secure offline workspace...</p>
          <div id="startupActions" class="actions"></div>
        </div>
      </section>

      <section id="cacheWarning" class="warning hidden" role="alert"></section>

      <header class="top-panel" id="topPanel">
        <div id="panelContent" class="panel-content">
          <div class="panel-left">
            <div class="button-group" id="formNav">
              <button data-view="roi" type="button">ROI</button>
              <button data-view="notice" type="button">Notice of Privacy Practices</button>
            </div>
            <div class="button-group" id="infoNav">
              <button data-view="general" type="button">General Info</button>
              <button data-view="staff" type="button">Staff Info</button>
            </div>
          </div>
          <div class="button-group session-controls">
            <button id="panelChevron" class="chevron" aria-expanded="true" aria-controls="panelContent">Hide Panel â–²</button>
            <div class="session-action-row">
              <button id="lockBtn" type="button" class="hidden">Lock</button>
              <div class="hold-wrap">
                <div id="deleteProgress" class="hold-progress"></div>
                <button id="deletePhiBtn" type="button" class="danger">Delete PHI</button>
              </div>
            </div>
          </div>
        </div>
      </header>

      <main id="mainContent" class="main-content">
        <div id="pdfActionWrap" class="pdf-action hidden">
          <button id="createPdfBtn" type="button">Create PDF</button>
        </div>

        <section id="viewGeneral" class="view hidden">
          <h2>General Info</h2>
          <label>Customer First Name <input id="generalFirstName" type="text" autocomplete="off" /></label>
          <label>Customer Last Name <input id="generalLastName" type="text" autocomplete="off" /></label>
          <label>Date of Birth <input id="generalDob" type="date" /></label>
        </section>

        <section id="viewStaff" class="view hidden">
          <h2>Staff Info</h2>
          <label>First Name <input id="staffFirstName" type="text" autocomplete="off" /></label>
          <label>Last Name <input id="staffLastName" type="text" autocomplete="off" /></label>
          <div id="dirPickerWrap" class="hidden">
            <button id="pickFolderBtn" type="button">Choose Default Save Folder</button>
            <p id="folderStatus" class="muted"></p>
          </div>
        </section>

        <section id="viewRoi" class="view hidden">
          <div class="view-header">
            <h2>Release of Information</h2>
            <div class="roi-switcher">
              <label for="roiSelect">ROI Instance</label>
              <select id="roiSelect" aria-label="Select ROI instance"></select>
              <button id="addRoiBtn" type="button">Add New ROI</button>
            </div>
          </div>

          <form id="roiForm" class="form-card" autocomplete="off">
            <div class="roi-top-row">
              <div class="roi-logo-slot" aria-label="Company logo area">
                <img src="assets/benchmark-logo.svg" alt="Benchmark Human Services logo" class="roi-logo-img" />
              </div>
              <div class="roi-client-meta">
                <p class="readonly-line roi-client-name"><span id="roiClientName"></span></p>
                <p class="readonly-line"><strong>DOB:</strong> <span id="roiClientDob"></span></p>
              </div>
            </div>

            <section class="roi-route-grid" aria-label="ROI routing section">
              <div class="roi-route-col roi-route-left">
                <div class="roi-route-inset">
                  <label class="roi-route-mark">
                    <input id="roiLeftTo" class="route-toggle" type="checkbox" checked />
                    <span class="radio-filled" aria-hidden="true"></span>
                    <span>To</span>
                  </label>
                  <label class="roi-route-mark">
                    <input id="roiLeftFrom" class="route-toggle" type="checkbox" checked />
                    <span class="radio-filled" aria-hidden="true"></span>
                    <span>From</span>
                  </label>
                </div>
                <div class="roi-route-company-block">
                  <p class="roi-route-company">Benchmark Human Services</p>
                  <p class="roi-route-contact">530 West Thomas Street, Suite C</p>
                  <p class="roi-route-contact">Milledgeville, GA 31061</p>
                  <p class="roi-route-contact">(478) 451-0557</p>
                </div>
              </div>

              <div class="roi-route-col roi-route-right">
                <div class="roi-route-inset">
                  <label class="roi-route-mark">
                    <input id="roiRightTo" class="route-toggle" type="checkbox" checked />
                    <span class="radio-filled" aria-hidden="true"></span>
                    <span>To</span>
                  </label>
                  <label class="roi-route-mark">
                    <input id="roiRightFrom" class="route-toggle" type="checkbox" checked />
                    <span class="radio-filled" aria-hidden="true"></span>
                    <span>From</span>
                  </label>
                </div>
                <div class="roi-route-fields">
                  <label>Agency <input id="roiOrganization" type="text" /></label>
                  <label>C/O <input id="roiCareOf" type="text" /></label>
                  <label>Address <textarea id="roiAddress" rows="3"></textarea></label>
                  <label>Phone <input id="roiPhone" type="tel" /></label>
                  <label>Fax <input id="roiFax" type="tel" /></label>
                </div>
              </div>
            </section>
            <hr class="roi-route-hr" />

            <section class="roi-initials-block" aria-label="ROI initials authorization section">
              <p class="roi-initials-title">Initial the appropriate space below:</p>

              <div class="roi-initial-row">
                <div class="roi-initial-boxes">
                  <input id="roiInit1A" class="roi-initial-input" type="text" maxlength="4" autocomplete="off" />
                  <input id="roiInit1B" class="roi-initial-input" type="text" maxlength="4" autocomplete="off" />
                </div>
                <p class="roi-initial-text">
                  I authorize the following information from my records (and any specific portion thereof).
                </p>
              </div>

              <div class="roi-initial-row">
                <div class="roi-initial-boxes">
                  <input id="roiInit2A" class="roi-initial-input" type="text" maxlength="4" autocomplete="off" />
                  <input id="roiInit2B" class="roi-initial-input" type="text" maxlength="4" autocomplete="off" />
                </div>
                <p class="roi-initial-text">
                  I authorize the disclosure of alcohol or drug abuse information, if any. (Please see paragraph 2 below.) If I am a minor, my
                  parent/guardian/court-ordered custodian and I BOTH must initial here in order for this information to be released.
                </p>
              </div>

              <div class="roi-initial-row">
                <div class="roi-initial-boxes">
                  <input id="roiInit3A" class="roi-initial-input" type="text" maxlength="4" autocomplete="off" />
                  <input id="roiInit3B" class="roi-initial-input" type="text" maxlength="4" autocomplete="off" />
                </div>
                <p class="roi-initial-text">
                  I authorize the disclosure of information, if any, concerning testing for HIV (human immunodeficiency virus) and/or treatment
                  for HIV or AIDS (acquired immune deficiency syndrome) and any related conditions.
                </p>
              </div>
            </section>
            <hr class="roi-route-hr" />

            <label>Purpose of Disclosure <input id="roiPurpose" type="text" /></label>

            <div class="roi-terms-block">
              <p class="roi-term-item">
                1. I understand that the information disclosed pursuant to this Authorization may be subject to re-disclosure by the recipient and
                no longer protected by federal privacy regulations or other applicable state or federal laws (except as set forth in paragraph 2
                below).
              </p>
              <p class="roi-term-item">
                2. I understand that, pursuant to 42 C.F.R. Part 2, alcohol and drug abuse records that I authorize to be disclosed pursuant to
                this document may not be further re-disclosed without my written consent, except by a court order that complies with the
                preconditions set forth at 42 C.F.R. 2.61 et seq., or the other limited circumstances specifically permitted by 42 C.F.R. Part 2.
                Any individual that makes such a disclosure in violation of these provisions may be reported to the United States Attorney and be
                subject to criminal penalties.
              </p>
              <p class="roi-term-item">
                3. I understand that the Department of Behavioral Health and Developmental Disabilities will not condition my treatment, payment,
                or eligibility for any applicable benefits on whether I provide authorization for the requested release of information.
              </p>
              <div class="roi-term-item">
                <p class="roi-term-item-text">
                  4. I intend this document to be a valid authorization conforming to all requirements of the Privacy Rule and State law, and
                  understand that my authorization will remain in effect for: (PLEASE CHECK ONE)
                </p>
                <div class="roi-duration-options">
                  <label class="roi-duration-option">
                    <input id="roiDurationOneYear" class="route-toggle" type="radio" name="roiDuration" />
                    <span class="radio-filled" aria-hidden="true"></span>
                    <span>one (1) year</span>
                  </label>
                  <span class="roi-duration-or">OR</span>
                  <label class="roi-duration-option">
                    <input id="roiDurationServicePeriod" class="route-toggle" type="radio" name="roiDuration" checked />
                    <span class="radio-filled" aria-hidden="true"></span>
                    <span>the period necessary to complete all transactions on matters related to services provided to me.</span>
                  </label>
                </div>
              </div>
              <p class="roi-term-item">
                I understand that unless otherwise limited by state or federal regulation, and except to the extent that action has been taken
                based upon it, I may revoke this authorization at any time as shown in the space below.
              </p>
            </div>

            <p class="readonly-line"><strong>Staff:</strong> <span id="roiStaffName"></span></p>
            <canvas id="roiSignature" class="signature-pad" width="640" height="180"></canvas>
            <div class="signature-actions">
              <button id="clearRoiSigBtn" type="button">Clear Signature</button>
            </div>
            <div class="roi-sign-row">
              <p>Signature of Individual</p>
              <p>Print Name: <span id="roiPrintName"></span></p>
              <p>Date: <span id="roiTodayDate"></span></p>
            </div>
          </form>
        </section>

        <section id="viewNotice" class="view hidden">
          <h2>Notice of Privacy Practices</h2>
          <form id="noticeForm" class="form-card" autocomplete="off">
            <p class="readonly-line"><strong>Client:</strong> <span id="noticeClientName"></span></p>
            <p class="readonly-line"><strong>DOB:</strong> <span id="noticeClientDob"></span></p>
            <p class="readonly-line"><strong>Staff:</strong> <span id="noticeStaffName"></span></p>

            <h3>Section 1 Summary</h3>
            <textarea id="noticeSummary1" rows="2"></textarea>
            <div class="legal-text" id="noticeLegal1"></div>

            <h3>Section 2 Summary</h3>
            <textarea id="noticeSummary2" rows="2"></textarea>
            <div class="legal-text" id="noticeLegal2"></div>

            <h3>Section 3 Summary</h3>
            <textarea id="noticeSummary3" rows="2"></textarea>
            <div class="legal-text" id="noticeLegal3"></div>

            <h3>Client Signature</h3>
            <canvas id="noticeSignature" class="signature-pad" width="640" height="180"></canvas>
            <div class="signature-actions">
              <button id="clearNoticeSigBtn" type="button">Clear Signature</button>
            </div>
            <div class="date-time-row">
              <label>Date <input id="noticeDate" type="date" /></label>
              <label>Time <input id="noticeTime" type="time" /></label>
            </div>
          </form>
        </section>
      </main>

      <section id="lockOverlay" class="lock-overlay hidden" aria-modal="true" role="dialog">
        <button id="continueBtn" class="continue-btn" type="button">Continue</button>
        <div id="unlockPrompt" class="unlock-prompt hidden">
          <h2>Enter PIN to Continue</h2>
          <input id="unlockPin" type="password" inputmode="numeric" pattern="[0-9]*" maxlength="6" />
          <div class="actions">
            <button id="unlockSubmit" type="button">Unlock</button>
            <button id="unlockCancel" type="button">Cancel</button>
          </div>
          <p id="unlockError" class="error"></p>
          <div id="forgotPinWrap" class="hidden">
            <div id="forgotProgress" class="hold-progress"></div>
            <button id="deleteFromLockBtn" class="danger" type="button">Delete case data and start over</button>
          </div>
        </div>
      </section>

      <div id="toast" class="toast hidden" role="status" aria-live="polite"></div>
    </div>

    <script type="module" src="src/main.js"></script>
  </body>
</html>
